/**
 * keta 1.11.0
 * Build 2021-04-21T15:24:16.331Z
 *
 * Copyright Kiwigrid GmbH 2014-2021
 * http://kiwigrid.github.io/keta/
 *
 * Licensed under MIT License
 * https://raw.githubusercontent.com/kiwigrid/keta/master/LICENSE
 */
"use strict";angular.module("keta.services.ApplicationSet",["keta.services.Application"]).provider("ketaApplicationSet",function(){this.$get=function($q,$rootScope,$log,ketaApplication,ketaEventBusDispatcher,ketaEventBusManager){var ApplicationSetInstance=function(givenEventBus){var that=this,eventBus=givenEventBus,params={};that.filter=function(filter){return params.filter=filter,that},that.project=function(projection){return params.projection=projection,that},that.sort=function(sorting){return params.sorting=sorting,that},that.paginate=function(pagination){return angular.isDefined(pagination)?(params.offset=angular.isDefined(pagination.offset)?pagination.offset:0,params.limit=angular.isDefined(pagination.limit)?pagination.limit:50):(params.offset=0,params.limit=50),that},that.query=function(){var deferred=$q.defer();return ketaEventBusDispatcher.send(eventBus,"appservice",{action:"getAppsInfo",params:params},function(reply){reply?(reply.params=params,reply.code===ketaEventBusDispatcher.RESPONSE_CODE_OK?(angular.isDefined(reply.result)&&angular.isDefined(reply.result.items)&&angular.forEach(reply.result.items,function(item,index){reply.result.items[index]=ketaApplication.create(eventBus,item)}),ketaEventBusManager.inDebugMode()&&$log.request(["appservice",{action:"getAppsInfo",params:params},reply],$log.ADVANCED_FORMATTER),deferred.resolve(reply),$rootScope.$digest()):deferred.reject(reply)):deferred.reject("Something bad happened. Got no reply.")}),deferred.promise}};return{create:function(eventBus){return new ApplicationSetInstance(eventBus)},indexOf:function(set,application){var index=-1;return angular.isDefined(set.result)&&angular.isDefined(set.result.items)&&angular.forEach(set.result.items,function(item,key){item.appId===application.appId&&(index=key)}),index},length:function(set){return angular.isDefined(set.result)&&angular.isDefined(set.result.items)&&angular.isArray(set.result.items)?set.result.items.length:0},get:function(set,index){return angular.isDefined(set.result)&&angular.isDefined(set.result.items)&&angular.isDefined(set.result.items[index])?set.result.items[index]:null},getAll:function(set){return angular.isDefined(set.result)&&angular.isDefined(set.result.items)?set.result.items:[]}}}});
//# sourceMappingURL=application-set.min.js.map