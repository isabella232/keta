"use strict";angular.module("keta.utils.Application",["keta.services.ApplicationSet","keta.utils.Common"]).factory("ApplicationUtils",function($log,$q,ApplicationSet,EventBusManager,CommonUtils){var deferred={getAppList:null};return{getAppName:function(localizedKey,labels,uiLocale){return CommonUtils.getLabelByLocale(localizedKey,labels,uiLocale)},getAppList:function(options){var DEFAULT_OPTIONS={eventBusId:"kiwibus",forceRefresh:!1,filter:{},excludeAppIds:{}},usedOptions=angular.extend({},DEFAULT_OPTIONS,options||{});return(null===deferred.getAppList||usedOptions.forceRefresh===!0)&&(deferred.getAppList=$q.defer(),ApplicationSet.create(EventBusManager.get(usedOptions.eventBusId)).filter(usedOptions.filter).query().then(function(reply){if(angular.isDefined(reply.result)&&angular.isDefined(reply.result.items)){var filteredApps=[];angular.forEach(reply.result.items,function(app){(angular.isDefined(app.appId)&&angular.isDefined(app.visible)&&app.visible===!0&&!angular.isDefined(usedOptions.excludeAppIds[app.appId])||usedOptions.excludeAppIds[app.appId]===!1&&angular.isString(app.entryUri)&&""!==app.entryUri&&CommonUtils.doesPropertyExist(app,"meta.en.name"))&&filteredApps.push(app)}),deferred.getAppList.resolve(filteredApps)}else{var errorMessage="Something bad happened. Got no reply.";deferred.getAppList.reject(errorMessage)}},function(){var errorMessage="Could not load application information.";deferred.getAppList.reject(errorMessage)})),deferred.getAppList.promise}}});
//# sourceMappingURL=application.min.js.map