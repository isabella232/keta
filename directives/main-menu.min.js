/**
 * keta 0.5.1
 * Build 2016-05-03T12:07:31.548Z
 *
 * Copyright Kiwigrid GmbH 2014-2016
 * http://kiwigrid.github.io/keta/
 *
 * Licensed under MIT License
 * https://raw.githubusercontent.com/kiwigrid/keta/master/LICENSE
 */
"use strict";angular.module("keta.directives.MainMenu",[]).directive("mainMenu",function($location,$rootScope){return{restrict:"EA",replace:!0,scope:{configuration:"=",titleCallback:"=?"},templateUrl:"/components/directives/main-menu.html",link:function(scope){scope.titleCallback=scope.titleCallback||function(){return""};var checkPaths=function(currentMenuLevelParts,locationLevelParts,activeFlag){for(var i=1;i<currentMenuLevelParts.length;i++)currentMenuLevelParts[i]!==locationLevelParts[i]&&(activeFlag=!1);return activeFlag};scope.isActive=function(menuEntry){var currentMenuLevelParts=menuEntry.link.split("/"),locationLevelParts=$location.path().split("/"),isActive=!0;return angular.isArray(menuEntry.items)&&menuEntry.items.length>0?!1:isActive=checkPaths(currentMenuLevelParts,locationLevelParts,isActive)},scope.isActiveParent=function(menuEntry){var currentMenuLevelParts=menuEntry.link.split("/"),locationLevelParts=$location.path().split("/"),isActiveParent=!1;return angular.isArray(menuEntry.items)&&menuEntry.items.length>0&&(isActiveParent=!0,isActiveParent=checkPaths(currentMenuLevelParts,locationLevelParts,isActiveParent)),isActiveParent},scope.checkExpand=function(menuEntry,$event){var menuLink=menuEntry.link;angular.isString(menuLink)&&"#"===menuLink.substr(0,1)&&(menuLink=angular.copy(menuLink.substr(1,menuLink.length-1))),$location.url()===menuLink&&angular.isDefined(scope.configuration.toggleBroadcast)&&($event.stopPropagation(),$rootScope.$broadcast(scope.configuration.toggleBroadcast)),angular.isArray(menuEntry.items)&&menuEntry.items.length>0&&($event.preventDefault(),angular.isUndefined(menuEntry.expanded)||menuEntry.expanded===!1?menuEntry.expanded=!0:menuEntry.expanded=!menuEntry.expanded)}}}});
//# sourceMappingURL=main-menu.min.js.map