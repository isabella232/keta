/**
 * keta 0.6.11
 * Build 2016-11-29T07:52:44.447Z
 *
 * Copyright Kiwigrid GmbH 2014-2016
 * http://kiwigrid.github.io/keta/
 *
 * Licensed under MIT License
 * https://raw.githubusercontent.com/kiwigrid/keta/master/LICENSE
 */
"use strict";angular.module("keta.directives.MainMenu",[]).directive("mainMenu",function($location,$rootScope){return{restrict:"EA",replace:!0,scope:{configuration:"=",titleCallback:"=?"},templateUrl:"/components/directives/main-menu.html",link:function(scope){scope.titleCallback=scope.titleCallback||function(){return""};var checkPaths=function(currentMenuLevelParts,locationLevelParts,activeFlag){for(var i=1;i<currentMenuLevelParts.length;i++)currentMenuLevelParts[i]!==locationLevelParts[i]&&(activeFlag=!1);return activeFlag};scope.isActive=function(menuEntry){var currentMenuLevelParts=menuEntry.link.split("/"),locationLevelParts=$location.path().split("/"),isActive=!0;return angular.isArray(menuEntry.items)&&menuEntry.items.length>0?!1:isActive=checkPaths(currentMenuLevelParts,locationLevelParts,isActive)},scope.isActiveParent=function(menuEntry){var currentMenuLevelParts=menuEntry.link.split("/"),locationLevelParts=$location.path().split("/"),isActiveParent=!1;return angular.isArray(menuEntry.items)&&menuEntry.items.length>0&&(isActiveParent=!0,isActiveParent=checkPaths(currentMenuLevelParts,locationLevelParts,isActiveParent)),isActiveParent},scope.checkExpand=function(menuEntry,$event){var menuLink=menuEntry.link;angular.isString(menuLink)&&"#"===menuLink.substr(0,1)&&(menuLink=angular.copy(menuLink.substr(1,menuLink.length-1))),$location.url()===menuLink&&angular.isDefined(scope.configuration.toggleBroadcast)&&($event.stopPropagation(),$rootScope.$broadcast(scope.configuration.toggleBroadcast)),angular.isArray(menuEntry.items)&&menuEntry.items.length>0&&($event.preventDefault(),angular.isUndefined(menuEntry.expanded)||menuEntry.expanded===!1?menuEntry.expanded=!0:menuEntry.expanded=!menuEntry.expanded)}}}}),angular.module("keta.directives.MainMenu").run(function($templateCache){$templateCache.put("/components/directives/main-menu.html",'<div>	<div data-ng-if="titleCallback()" class="sidebar-title">		<span>{{ titleCallback() }}</span>	</div>	<ul class="nav nav-pills nav-stacked keta-main-menu">		<li data-ng-repeat="entry in configuration.items"			data-ng-class="{				\'active\': isActive(entry),				\'active-parent\': isActiveParent(entry)			}">			<a data-ng-href="{{ entry.link }}" data-ng-click="checkExpand(entry, $event)"			   title="{{ entry.name }}">				<span class="{{ entry.icon }}"></span>				<span class="list-item">{{ entry.name }}</span>				<span class="expander glyphicon"					data-ng-if="entry.items"					data-ng-class="{ \'glyphicon-minus\': entry.expanded, \'glyphicon-plus\': !entry.expanded }">				</span>			</a>			<ul class="nav nav-pills nav-stacked expanded nav-sub-level" data-ng-if="entry.expanded">				<li data-ng-repeat="entryLevel2 in entry.items"					data-ng-class="{						\'active\': isActive(entryLevel2),						\'active-parent\': isActiveParent(entryLevel2)					}">					<a data-ng-href="{{ entryLevel2.link }}" data-ng-click="checkExpand(entryLevel2, $event)">						<span data-ng-if="entryLevel2.icon" class="{{ entryLevel2.icon }}"></span>						<span>{{ entryLevel2.name }}</span>						<span class="expander glyphicon"							data-ng-if="entryLevel2.items"							data-ng-class="{ \'glyphicon-minus\': entryLevel2.expanded, \'glyphicon-plus\': !entryLevel2.expanded }">						</span>					</a>					<ul class="nav nav-pills nav-stacked expanded nav-sub-level" data-ng-if="entryLevel2.expanded">						<li data-ng-repeat="entryLevel3 in entryLevel2.items"							data-ng-class="{ \'active\': isActive(entryLevel3) }">							<a data-ng-href="{{ entryLevel3.link }}">								<span data-ng-if="entryLevel3.icon" class="{{ entryLevel3.icon }}"></span>								<span>{{ entryLevel3.name }}</span>							</a>						</li>					</ul>				</li>			</ul>		</li>	</ul></div>')});
//# sourceMappingURL=main-menu.min.js.map