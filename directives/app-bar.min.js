/**
 * keta 0.6.2
 * Build 2016-09-09T07:26:38.278Z
 *
 * Copyright Kiwigrid GmbH 2014-2016
 * http://kiwigrid.github.io/keta/
 *
 * Licensed under MIT License
 * https://raw.githubusercontent.com/kiwigrid/keta/master/LICENSE
 */
"use strict";angular.module("keta.directives.AppBar",["keta.directives.Sidebar","keta.services.AccessToken","keta.services.ApplicationSet","keta.services.Device","keta.services.DeviceSet","keta.services.EventBusDispatcher","keta.services.EventBusManager","keta.services.User","keta.utils.Common"]).constant("AppBarConstants",{COMPONENT:{WORLD_SWITCHER:"worldSwitcher",MENU_BAR_TOGGLE:"menuBarToggle",NOTIFICATION_BAR_TOGGLE:"notificationBarToggle",APP_TITLE:"appTitle",USER_MENU:"userMenu",LANGUAGE_MENU:"languageMenu",ENERGY_MANAGER_MENU:"energyManagerMenu",COMPACT_MENU:"compactMenu"},SIZE:{XXS:"xxs",XS:"xs",SM:"sm",MD:"md",LG:"lg"},STATE:{HIDDEN:"hidden",FULL:"full",COMPACT:"compact"},ROOT_APP_ID:"kiwigrid.desktop"}).constant("AppBarMessageKeys",{en_GB:{"__keta.directives.AppBar_app_title":"Application","__keta.directives.AppBar_all_apps":"All Apps","__keta.directives.AppBar_all_energy_managers":"All Energy-Managers","__keta.directives.AppBar_energy_manager":"Energy-Manager","__keta.directives.AppBar_user_logout":"Logout","__keta.directives.AppBar_user_profile":"User Account","__keta.directives.AppBar_logged_in_as":"You are temporarily logged in as","__keta.directives.AppBar_drop_access":"Drop access"},de_DE:{"__keta.directives.AppBar_app_title":"Applikation","__keta.directives.AppBar_all_apps":"Alle Apps","__keta.directives.AppBar_all_energy_managers":"Alle Energy-Manager","__keta.directives.AppBar_energy_manager":"Energy-Manager","__keta.directives.AppBar_user_logout":"Abmelden","__keta.directives.AppBar_user_profile":"Benutzerkonto","__keta.directives.AppBar_logged_in_as":"Sie sind temporär angemeldet als","__keta.directives.AppBar_drop_access":"Zugriff beenden"},fr_FR:{"__keta.directives.AppBar_app_title":"Application","__keta.directives.AppBar_all_apps":"Toutes les Applications","__keta.directives.AppBar_all_energy_managers":"Tous les Energy-Managers","__keta.directives.AppBar_energy_manager":"Energy-Manager","__keta.directives.AppBar_user_logout":"Se déconnecter","__keta.directives.AppBar_user_profile":"Compte d’utilisateur","__keta.directives.AppBar_logged_in_as":"Vous êtes connecté en tant que temporairement","__keta.directives.AppBar_drop_access":"Déposez accès"},nl_NL:{"__keta.directives.AppBar_app_title":"Applicatie","__keta.directives.AppBar_all_apps":"Alle applicaties","__keta.directives.AppBar_all_energy_managers":"Alle Energy-Managers","__keta.directives.AppBar_energy_manager":"Energy-Manager","__keta.directives.AppBar_user_logout":"Uitloggen","__keta.directives.AppBar_user_profile":"Gebruikers account","__keta.directives.AppBar_logged_in_as":"U bent tijdelijk aangemeld als","__keta.directives.AppBar_drop_access":"Drop toegang"},it_IT:{"__keta.directives.AppBar_app_title":"Application","__keta.directives.AppBar_all_apps":"Tutte le applicazioni","__keta.directives.AppBar_all_energy_managers":"Tutti gli Energy-Managers","__keta.directives.AppBar_energy_manager":"Energy-Manager","__keta.directives.AppBar_user_logout":"Disconnettersi","__keta.directives.AppBar_user_profile":"Account utente","__keta.directives.AppBar_logged_in_as":"Stai temporaneamente l’accesso come","__keta.directives.AppBar_drop_access":"Goccia accesso"}}).directive("appBar",function($rootScope,$window,$document,$filter,EventBusDispatcher,EventBusManager,DeviceSet,ApplicationSet,User,AccessToken,AccessTokenConstants,AppBarConstants,AppBarMessageKeys,DeviceConstants,SidebarConstants,CommonUtils){return{restrict:"EA",replace:!0,scope:{eventBusId:"=?",locales:"=?",currentLocale:"=?",fallbackLocale:"=?",labels:"=?",links:"=?",worlds:"=?",displayModes:"=?",rootApp:"=?"},transclude:!0,templateUrl:"/components/directives/app-bar.html",link:function(scope,element){scope.user={},scope.menus={},scope.worlds=scope.worlds||[],scope.locales=scope.locales||[],scope.energyManagers=[],scope.impersonationInfo={},scope.locales=$filter("orderBy")(scope.locales,"name"),scope.eventBusId=scope.eventBusId||"kiwibus";var eventBus=EventBusManager.get(scope.eventBusId),STATES=AppBarConstants.STATE,SIZES=AppBarConstants.SIZE,DEFAULT_CONTAINER_HEIGHT=120;scope.MENU_ELEMENTS=AppBarConstants.COMPONENT;var DECIMAL_RADIX=10,HIDDEN_CLASS_PREFIX="hidden-",VISIBLE_CLASS_PREFIX="visible-",DEFAULT_LOCALE_FALLBACK="en_GB",LOCALE_SHORT_LENGTH=2,sizesFullState={};sizesFullState[SIZES.XXS]=STATES.FULL,sizesFullState[SIZES.XS]=STATES.FULL,sizesFullState[SIZES.SM]=STATES.FULL,sizesFullState[SIZES.MD]=STATES.FULL,sizesFullState[SIZES.LG]=STATES.FULL;var sizesDefaultState={};sizesDefaultState[SIZES.XXS]=STATES.HIDDEN,sizesDefaultState[SIZES.XS]=STATES.HIDDEN,sizesDefaultState[SIZES.SM]=STATES.COMPACT,sizesDefaultState[SIZES.MD]=STATES.COMPACT,sizesDefaultState[SIZES.LG]=STATES.FULL;var sizesHiddenState={};sizesHiddenState[SIZES.XXS]=STATES.HIDDEN,sizesHiddenState[SIZES.XS]=STATES.HIDDEN,sizesHiddenState[SIZES.SM]=STATES.HIDDEN,sizesHiddenState[SIZES.MD]=STATES.HIDDEN,sizesHiddenState[SIZES.LG]=STATES.HIDDEN;var defaultDisplayModes={};defaultDisplayModes[scope.MENU_ELEMENTS.WORLD_SWITCHER]=sizesHiddenState,defaultDisplayModes[scope.MENU_ELEMENTS.MENU_BAR_TOGGLE]=sizesFullState,defaultDisplayModes[scope.MENU_ELEMENTS.NOTIFICATION_BAR_TOGGLE]=sizesFullState,defaultDisplayModes[scope.MENU_ELEMENTS.APP_TITLE]=sizesFullState,defaultDisplayModes[scope.MENU_ELEMENTS.USER_MENU]=sizesDefaultState,defaultDisplayModes[scope.MENU_ELEMENTS.ENERGY_MANAGER_MENU]=sizesDefaultState,defaultDisplayModes[scope.MENU_ELEMENTS.LANGUAGE_MENU]=sizesDefaultState,defaultDisplayModes[scope.MENU_ELEMENTS.COMPACT_MENU]={},defaultDisplayModes[scope.MENU_ELEMENTS.COMPACT_MENU][SIZES.XXS]=STATES.COMPACT,defaultDisplayModes[scope.MENU_ELEMENTS.COMPACT_MENU][SIZES.XS]=STATES.COMPACT,defaultDisplayModes[scope.MENU_ELEMENTS.COMPACT_MENU][SIZES.SM]=STATES.HIDDEN,defaultDisplayModes[scope.MENU_ELEMENTS.COMPACT_MENU][SIZES.MD]=STATES.HIDDEN,defaultDisplayModes[scope.MENU_ELEMENTS.COMPACT_MENU][SIZES.LG]=STATES.HIDDEN;var scrollContainerHeight=DEFAULT_CONTAINER_HEIGHT;scope.container=element[0];var navBars=element.find("nav"),navbarFirst=navBars[0],navbarFirstHeight=0,impersonationBar=element[0].getElementsByClassName("impersonation-bar")[0],impersonationBarHeight=0,navbarSecond=navBars[1],navbarSecondHeight=0,navbarSecondMarginBottom=0,isMenuVisible=function(menuElement){var isVisible=!1;return angular.forEach(SIZES,function(size){scope.displayModes[menuElement][size]!==STATES.HIDDEN&&(isVisible=!0)}),isVisible},mergeObjects=function mergeObjects(customObject,defaultObject){var value,result={};for(value in customObject)value in defaultObject&&"object"==typeof customObject[value]&&null!==value?result[value]=mergeObjects(customObject[value],defaultObject[value]):result[value]=customObject[value];for(value in defaultObject)value in result||(result[value]=defaultObject[value]);return result},setContainerHeight=function(){navbarFirstHeight=navbarFirst.offsetHeight,angular.isDefined(impersonationBar)&&(impersonationBarHeight=impersonationBar.offsetHeight),navbarSecondHeight=navbarSecond.offsetHeight,navbarSecondMarginBottom=parseInt($window.getComputedStyle(navbarSecond,null).getPropertyValue("margin-bottom"),DECIMAL_RADIX),scrollContainerHeight=navbarFirstHeight+impersonationBarHeight+navbarSecondHeight+navbarSecondMarginBottom},isLocaleAvailable=function(localeCode){var isAvailable=!1;return angular.forEach(scope.locales,function(availableLocale){angular.isDefined(availableLocale.code)&&availableLocale.code===localeCode&&(isAvailable=!0)}),isAvailable};scope.displayModes=mergeObjects(scope.displayModes,defaultDisplayModes),scope.fallbackLocale=scope.fallbackLocale||DEFAULT_LOCALE_FALLBACK,scope.currentLocale=scope.currentLocale||scope.fallbackLocale,isLocaleAvailable(scope.currentLocale)||(scope.currentLocale=scope.fallbackLocale),scope.MESSAGE_KEY_PREFIX="__keta.directives.AppBar",scope.labels=angular.extend(AppBarMessageKeys,scope.labels),scope.getLabel=function(key){return CommonUtils.getLabelByLocale(key,scope.labels,scope.currentLocale)};var accessToken=AccessToken.decode(AccessToken.get()),defaultLinks={ALL_APPS:null,ALL_ENERGY_MANAGERS:null,APP_ROOT:null!==accessToken&&angular.isDefined(accessToken.user_id)?CommonUtils.addUrlParameter("/","userId",accessToken.user_id):"/",USER_PROFILE:null,USER_LOGOUT:null};scope.TYPES={ENERGY_MANAGER:"ENERGY_MANAGER"},scope.LIMITS={ENERGY_MANAGER:3};var PREDICATES={ENERGY_MANAGER:{field:"name",reverse:!1}};scope.links=angular.isDefined(scope.links)?angular.extend(defaultLinks,scope.links):defaultLinks;var setDefaultLinks=function(){scope.links.USER_LOGOUT=angular.isString(scope.links.USER_LOGOUT)?scope.links.USER_LOGOUT:"/rest/auth/logout",null!==eventBus&&ApplicationSet.create(eventBus).query().then(function(reply){if(angular.isDefined(reply.result)&&angular.isDefined(reply.result.items)){var entryUri=null,name={};scope.rootApp=null,angular.forEach(reply.result.items,function(app){angular.isDefined(app.appId)&&app.appId===AppBarConstants.ROOT_APP_ID&&angular.isDefined(app.entryUri)&&(entryUri=app.entryUri,CommonUtils.doesPropertyExist(app,"meta.i18n")&&angular.forEach(Object.keys(app.meta.i18n),function(locale){angular.forEach(scope.locales,function(availableLocale){angular.isDefined(availableLocale.code)&&availableLocale.code.substr(0,LOCALE_SHORT_LENGTH)===locale&&(name[availableLocale.code]=app.meta.i18n[locale].name)})}))});var link=document.createElement("a");if(link.href=entryUri,null!==entryUri&&(scope.rootApp={},scope.rootApp.link=CommonUtils.addUrlParameter(entryUri,"userId",accessToken.user_id),scope.rootApp.name=name,scope.worlds.unshift({name:"Desktop",link:scope.rootApp.link})),scope.links.ALL_APPS=angular.isString(scope.links.ALL_APPS)?scope.links.ALL_APPS:CommonUtils.addUrlParameter(entryUri+"#/applications","userId",accessToken.user_id),scope.links.USER_PROFILE=angular.isString(scope.links.USER_PROFILE)?scope.links.USER_PROFILE:CommonUtils.addUrlParameter(entryUri+"#/user","userId",accessToken.user_id),!angular.isString(scope.links.ALL_ENERGY_MANAGERS)){var allManagersUri=CommonUtils.addUrlParameter(entryUri,"deviceClass","com.kiwigrid.devices.em.EnergyManager");scope.links.ALL_ENERGY_MANAGERS=CommonUtils.addUrlParameter(allManagersUri+"#/devices","userId",accessToken.user_id)}}})},allLinkKeysAlreadySet=!0;angular.forEach(Object.keys(defaultLinks),function(linkKey){null===defaultLinks[linkKey]&&(allLinkKeysAlreadySet=!1)}),allLinkKeysAlreadySet===!1&&setDefaultLinks(),scope.getClasses=function(menuName,elementType){var classes=[];return angular.isDefined(elementType)||(elementType="menu"),angular.isDefined(scope.menus[menuName])&&angular.isDefined(scope.menus[menuName].isOpen)&&scope.menus[menuName].isOpen&&classes.push("open"),angular.forEach(SIZES,function(size){var state=scope.displayModes[menuName][size];switch(elementType){case"menu":switch(state){case STATES.HIDDEN:classes.push(HIDDEN_CLASS_PREFIX+size);break;case STATES.FULL:classes.push(VISIBLE_CLASS_PREFIX+size);break;case STATES.COMPACT:classes.push(VISIBLE_CLASS_PREFIX+size)}break;case"label":state===STATES.COMPACT&&classes.push(HIDDEN_CLASS_PREFIX+size)}}),classes.join(" ")};var getDevices=function(){null!==eventBus&&angular.isDefined(scope.user.userId)&&isMenuVisible(scope.MENU_ELEMENTS.ENERGY_MANAGER_MENU)&&DeviceSet.create(eventBus).filter({"deviceModel.deviceClass":{$in:[DeviceConstants.CLASS.ENERGY_MANAGER]},owner:scope.user.userId}).project({tagValues:{IdName:1,SettingsNetworkMap:1}}).query().then(function(reply){if(angular.isDefined(reply.result)&&angular.isDefined(reply.result.items)){var energyManagers=[];angular.forEach(reply.result.items,function(item){var emIP=angular.isDefined(item.tagValues)&&angular.isDefined(item.tagValues.SettingsNetworkMap)&&angular.isDefined(item.tagValues.SettingsNetworkMap.value)&&angular.isDefined(item.tagValues.SettingsNetworkMap.value.ipv4)?item.tagValues.SettingsNetworkMap.value.ipv4:null;null!==emIP&&energyManagers.push({name:item.tagValues.IdName.value,link:"http://"+emIP})}),scope.energyManagers=energyManagers}})},getActiveLangEntry=function(){var activeLangEntry=scope.locales[0]||{};return angular.forEach(scope.locales,function(value){value.code===scope.currentLocale&&(activeLangEntry=value)}),activeLangEntry},readLocaleFromUserProp=function(){CommonUtils.doesPropertyExist(scope.user,"properties.locale.code")&&isLocaleAvailable(scope.user.properties.locale.code)&&(scope.currentLocale=scope.user.properties.locale.code)},writeLocaleUserProp=function(localeCode){scope.user.properties=scope.user.properties||{},scope.user.properties.locale=scope.user.properties.locale||{},scope.user.properties.locale.code=localeCode,EventBusDispatcher.send(eventBus,"userservice",{action:"mergeUser",body:{properties:scope.user.properties},params:{userId:scope.user.userId}})},updateMenus=function(){scope.menus={},scope.menus[scope.MENU_ELEMENTS.COMPACT_MENU]={isOpen:!1},scope.menus[scope.MENU_ELEMENTS.WORLD_SWITCHER]={isOpen:!1},scope.menus[scope.MENU_ELEMENTS.ENERGY_MANAGER_MENU]={isOpen:!1},scope.menus[scope.MENU_ELEMENTS.USER_MENU]={isOpen:!1},scope.menus[scope.MENU_ELEMENTS.LANGUAGE_MENU]={isOpen:!1,activeEntry:getActiveLangEntry()}};null!==eventBus&&User.getCurrent(eventBus).then(function(reply){scope.user=reply,readLocaleFromUserProp(),getDevices()}),scope.isImpersonated=function(){var result=!1;return AccessToken.isType(AccessTokenConstants.SESSION_TYPE.IMPERSONATED)&&(scope.impersonationInfo={userId:AccessToken.getUserId(),backUrl:AccessToken.getBackUrl()},result=!0),result},scope.order=function(type){var field=angular.isDefined(PREDICATES[type])?PREDICATES[type].field:"name";return function(item){return angular.isDefined(item[field])?item[field]:""}},scope.reverse=function(type){return angular.isDefined(PREDICATES[type])&&angular.isDefined(PREDICATES[type].reverse)?PREDICATES[type].reverse:!1},scope.scrollOverNavbarFirst=!1,angular.element($window).bind("scroll",function(){angular.isDefined(navbarFirst)&&(this.scrollY>navbarFirstHeight+impersonationBarHeight?(scope.scrollOverNavbarFirst=!0,element.css("height",scrollContainerHeight+"px")):(scope.scrollOverNavbarFirst=!1,element.css("height","auto")),scope.menus.worldSwitcher.isOpen=!1,scope.$digest())}),scope.toggleOpenState=function(menuName){if(angular.isDefined(scope.menus[menuName])){var currentState=angular.copy(scope.menus[menuName].isOpen);scope.closeAllMenus(),currentState===scope.menus[menuName].isOpen&&(scope.menus[menuName].isOpen=!scope.menus[menuName].isOpen)}},scope.closeAllMenus=function(){scope.menus[scope.MENU_ELEMENTS.WORLD_SWITCHER].isOpen=!1,scope.menus[scope.MENU_ELEMENTS.USER_MENU].isOpen=!1,scope.menus[scope.MENU_ELEMENTS.ENERGY_MANAGER_MENU].isOpen=!1,scope.menus[scope.MENU_ELEMENTS.COMPACT_MENU].isOpen=!1,scope.menus[scope.MENU_ELEMENTS.LANGUAGE_MENU].isOpen=!1},scope.setLocale=function(locale){scope.currentLocale=locale.code,writeLocaleUserProp(locale.code),scope.menus[scope.MENU_ELEMENTS.LANGUAGE_MENU].activeEntry=locale,scope.closeAllMenus()},scope.$on("$locationChangeStart",function(){scope.closeAllMenus()}),scope.isActive=function(menuName,entry){return angular.isDefined(scope.menus[menuName])&&scope.menus[menuName].activeEntry===entry},scope.toggleSidebar=function($event,position){$event.stopPropagation(),scope.closeAllMenus(),position===SidebarConstants.POSITION.LEFT?$rootScope.$broadcast(SidebarConstants.EVENT.TOGGLE_SIDEBAR_LEFT):position===SidebarConstants.POSITION.RIGHT&&$rootScope.$broadcast(SidebarConstants.EVENT.TOGGLE_SIDEBAR_RIGHT)},$document.bind("click",function(event){var appBarHtml=element.html(),targetElementHtml=angular.element(event.target).html();-1===appBarHtml.indexOf(targetElementHtml)&&(scope.closeAllMenus(),scope.$digest())}),scope.$watch("energyManagers",function(newValue,oldValue){newValue!==oldValue&&updateMenus()}),scope.$watch("container.offsetHeight",function(newValue,oldValue){newValue!==oldValue&&setContainerHeight()}),setContainerHeight(),updateMenus()}}}),angular.module("keta.directives.AppBar").run(function($templateCache){$templateCache.put("/components/directives/app-bar.html",'<div class="navigation-container">	<div class="impersonation-bar" data-ng-show="isImpersonated()">		<div class="container-fluid">			<span class="glyphicon glyphicon-warning-sign"></span>			<span>				{{ getLabel(MESSAGE_KEY_PREFIX + \'_logged_in_as\') }}				<strong>{{ user.givenName }} {{ user.familyName }} ({{impersonationInfo.userId}}). </strong>				<a href="{{impersonationInfo.backUrl}}" title="{{ getLabel(MESSAGE_KEY_PREFIX + \'_drop_access\') }}">					{{ getLabel(MESSAGE_KEY_PREFIX + \'_drop_access\') }}				</a>			</span>		</div>	</div>	<nav class="navbar navbar-level-1 brand-bar" role="navigation">		<div class="container-fluid">			<div data-ng-transclude></div>			<div class="dropdown pull-right"				data-ng-if="worlds.length > 0"				data-ng-class="getClasses(MENU_ELEMENTS.WORLD_SWITCHER)">				<a href="" class="dropdown-toggle" data-ng-click="toggleOpenState(MENU_ELEMENTS.WORLD_SWITCHER)">					<span class="glyphicon glyphicon-th"></span>				</a>				<ul class="dropdown-menu">					<li data-ng-repeat="world in worlds">						<a data-ng-href="{{ world.link }}">{{ world.name }}</a>					</li>				</ul>			</div>		</div>	</nav>	<nav class="navbar navbar-default navbar-level-2" data-ng-class="{\'navbar-fixed-top\': scrollOverNavbarFirst}"		role="navigation">		<div class="container-fluid">			<ul class="nav navbar-nav">				<li class="menu-navbar" data-ng-class="getClasses(MENU_ELEMENTS.MENU_BAR_TOGGLE)">					<a href="" data-ng-click="toggleSidebar($event, \'left\')">						<span class="glyphicon glyphicon-align-justify"></span>					</a>				</li>				<li data-ng-class="getClasses(MENU_ELEMENTS.APP_TITLE)">					<a data-ng-if="links.APP_ROOT !== null" class="application-title"						data-ng-href="{{ links.APP_ROOT }}">{{ getLabel(MESSAGE_KEY_PREFIX + \'_app_title\') }}</a>					<span data-ng-if="links.APP_ROOT === null" class="application-title">						{{ getLabel(MESSAGE_KEY_PREFIX + \'_app_title\') }}					</span>				</li>			</ul>			<ul class="nav navbar-nav navbar-right">				<li class="dropdown" data-ng-class="getClasses(MENU_ELEMENTS.USER_MENU)">					<a href="" data-ng-click="toggleOpenState(MENU_ELEMENTS.USER_MENU)">						<span class="glyphicon glyphicon-user"></span>						<span class="navbar-label" data-ng-class="getClasses(MENU_ELEMENTS.USER_MENU, \'label\')">							{{ user.givenName }} {{ user.familyName }}						</span>						<span class="caret"></span>					</a>					<ul class="dropdown-menu dropdown-menu-right">						<li data-ng-if="links.USER_PROFILE">							<a data-ng-href="{{ links.USER_PROFILE }}" data-ng-click="closeAllMenus()">								{{ getLabel(MESSAGE_KEY_PREFIX + \'_user_profile\') }}							</a>						</li>						<li>							<a data-ng-href="{{ links.USER_LOGOUT }}" data-ng-click="closeAllMenus()">								{{ getLabel(MESSAGE_KEY_PREFIX + \'_user_logout\') }}							</a>						</li>					</ul>				</li>				<li class="dropdown"					data-ng-if="energyManagers.length > 0"					data-ng-class="getClasses(MENU_ELEMENTS.ENERGY_MANAGER_MENU)">					<a href="" class="dropdown-toggle"						data-ng-click="toggleOpenState(MENU_ELEMENTS.ENERGY_MANAGER_MENU)">						<span class="glyphicon glyphicon-tasks" title="Energy-Manager"></span>						<span class="navbar-label"							data-ng-class="getClasses(MENU_ELEMENTS.ENERGY_MANAGER_MENU, \'label\')">							{{ getLabel(MESSAGE_KEY_PREFIX + \'_energy_manager\') }}						</span>						<span>({{ energyManagers.length }})</span>						<span class="caret"></span>					</a>					<ul class="dropdown-menu">						<li data-ng-repeat="							entry in energyManagers |							orderBy:order(TYPES.ENERGY_MANAGER):reverse(TYPES.ENERGY_MANAGER) |							limitTo:LIMITS.ENERGY_MANAGER">							<a data-ng-href="{{ entry.link }}" data-ng-click="closeAllMenus()">								{{ entry.name }}							</a>						</li>						<li data-ng-if="energyManagers.length > LIMITS.ENERGY_MANAGER &&							links.ALL_ENERGY_MANAGERS !== null &&							labels.ALL_ENERGY_MANAGERS !== null">							<a data-ng-href="{{ links.ALL_ENERGY_MANAGERS }}" data-ng-click="closeAllMenus()">								{{ getLabel(MESSAGE_KEY_PREFIX + \'_all_energy_managers\') }}								({{ energyManagers.length }})							</a>						</li>					</ul>				</li>				<li class="dropdown"					data-ng-if="locales.length > 0"					data-ng-class="getClasses(MENU_ELEMENTS.LANGUAGE_MENU)">					<a href="" class="dropdown-toggle" data-ng-click="toggleOpenState(MENU_ELEMENTS.LANGUAGE_MENU)">						<span class="glyphicon glyphicon-flag"							title="{{ menus.languageMenu.activeEntry.nameShort }}"></span>						<span class="navbar-label" data-ng-class="getClasses(MENU_ELEMENTS.LANGUAGE_MENU, \'label\')">							{{ menus.languageMenu.activeEntry.nameShort }}						</span>						<span class="caret"></span>					</a>					<ul class="dropdown-menu">						<li data-ng-repeat="locale in locales"							data-ng-class="{ active: isActive(MENU_ELEMENTS.LANGUAGE_MENU, locale) }">							<a href="" data-ng-click="setLocale(locale)">{{ locale.name }}</a>						</li>					</ul>				</li>				<li class="dropdown" data-ng-class="getClasses(MENU_ELEMENTS.COMPACT_MENU)">					<a href="" data-ng-click="toggleOpenState(MENU_ELEMENTS.COMPACT_MENU)">						<span class="glyphicon glyphicon-option-vertical"></span>					</a>					<ul class="dropdown-menu dropdown-menu-right">						<li>							<a data-ng-href="{{ links.USER_PROFILE }}" data-ng-click="closeAllMenus()">								{{ getLabel(MESSAGE_KEY_PREFIX + \'_user_profile\') }}							</a>						</li>						<li>							<a data-ng-href="{{ links.USER_LOGOUT }}" data-ng-click="closeAllMenus()">								{{ getLabel(MESSAGE_KEY_PREFIX + \'_user_logout\') }}							</a>						</li>						<li class="divider" data-ng-if="energyManagers.length"></li>						<li data-ng-repeat="							entry in energyManagers |							orderBy:order(TYPES.ENERGY_MANAGER):reverse(TYPES.ENERGY_MANAGER) |							limitTo:LIMITS.ENERGY_MANAGER">							<a data-ng-href="{{ entry.link }}" data-ng-click="closeAllMenus()">								{{ entry.name }}							</a>						</li>						<li data-ng-if="energyManagers.length > LIMITS.ENERGY_MANAGER">							<a data-ng-href="{{ links.ALL_ENERGY_MANAGERS }}" data-ng-click="closeAllMenus()">								{{ getLabel(MESSAGE_KEY_PREFIX + \'_all_energy_managers\') }}								({{ energyManagers.length }})							</a>						</li>						<li class="divider" data-ng-if="locales"></li>						<li data-ng-repeat="entry in locales"							data-ng-class="{ active: isActive(MENU_ELEMENTS.LANGUAGE_MENU, entry) }">							<a href="" data-ng-click="setLocale(entry)">{{ entry.name }}</a>						</li>					</ul>				</li>				<li data-ng-class="getClasses(MENU_ELEMENTS.NOTIFICATION_BAR_TOGGLE)">					<a href="" id="toggleSidebarButton" data-ng-click="toggleSidebar($event, \'right\')">						<span class="glyphicon glyphicon-bell"							title="{{ getLabel(MESSAGE_KEY_PREFIX + \'_notifications\') }}"></span>						<span data-ng-if="notifications.length > 0" class="badge">{{notifications.length}}</span>					</a>				</li>			</ul>		</div>	</nav>	<div class="nav-backdrop"></div></div>')});
//# sourceMappingURL=app-bar.min.js.map